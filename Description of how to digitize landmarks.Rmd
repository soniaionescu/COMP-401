---
title: "Description of how to digitize landmarks"
author: "Sonia Ionescu"
date: '2018-02-09'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Getting Coordinates of Landmarks

#### Importing images into R

First, dowload and load the package jpeg, using 


`>install.packages("jpeg")`


`>library(jpeg)`


#### Plotting images in R

Then, use the plot_jpeg in this package function on your file, and the image should appear in the plot window in RStudio. 

For example, running the command

`>plot_jpeg("path/image.jpg")`
 
could show an image like this, in the plot window:

``` {r echo = FALSE}
library(jpeg)
plot_jpeg <- function(path, add=FALSE){
     require('jpeg')
     jpg = readJPEG(path, native=T) # read the file
     res = dim(jpg)[2:1] # get the resolution, [x, y]
     if (!add) # initialize an empty plot area if add==FALSE
         plot(1,1,xlim=c(1,res[1]),ylim=c(1,res[2]),asp=1,type='n',xaxs='i',yaxs='i',xaxt='n',yaxt='n',xlab='',ylab='',bty='n')
     rasterImage(jpg,1,1,res[1],res[2])
}
plot_jpeg("fallfish2.jpg")
```

#### Generating coordinate locations

In order to set coordinate locations, use the locator() function included in the base package of R.

The code

`>ji <- locator(29, type = "l")`

Stores a 2D matrix of X and corresponding Y coordinates of each click. The first argument is the number of clicks, and the type corresponds to l, so that they are connected by lines. Printing ji should show you the lists of x and y coordinates.

#### Standardizing coordinate locations into inches rather than pixles

Using locator, click on two locations on a ruler which correspond to one inch apart, and store them in a variable called scale. The code for this looks like this:

`>scale <- locator(2, type = "l")`

You can then calculate the Euclidian distance between these points and store them into a variable called "inch" using this code:

`>inch <- sqrt((scale$x[1]- scale$x[2])^2 + (scale$y[1] - scale$y[2])^2)`

The variable 'inch' now contains the number of pixels there are in an inch.

You can now loop through your variable containing all (x, y) coordinates, and convert them to inch values rather than pixels. This allows for standard measurements across photos, rather than depending on the resolution of a camera. This can be done using the code: 

`scale <- list(ji$x/inch, ji$y/inch)`

The variable scale now contains a scaled list of coordinates.

#### Appending your list of coordinates to an excel sheet

`dataFrameOfCoord <- data.frame(x=scale[[x]], y = scale[[y]])`
